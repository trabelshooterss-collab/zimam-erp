import React, { createContext, useState, useContext, useEffect } from 'react';

type Language = 'en' | 'ar' | 'de' | 'hi' | 'ur' | 'tl' | 'fr' | 'it' | 'pt';

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
  dir: 'ltr' | 'rtl';
}

const en = {
    app_name: 'Zimam',
    dashboard: 'Dashboard',
    inventory: 'AI Inventory',
    pos: 'Point of Sale',
    invoices: 'Invoices (ZATCA)',
    purchases: 'Purchases',
    customers: 'Customers',
    suppliers: 'Suppliers',
    accounting: 'Accounting',
    whatsapp: 'WhatsApp OCR',
    roadmap: 'Roadmap',
    settings: 'Settings',
    
    dev_by: 'Developed by',
    dev_name: 'Mohamed Said',
    contact_us: 'Contact Support',

    login_title: 'Sign in to Zimam',
    login_subtitle: 'Take control of your business',
    register_title: 'Create Account',
    register_subtitle: 'Start your journey with Zimam',
    full_name: 'Full Name',
    email_address: 'Email Address',
    password: 'Password',
    login_btn: 'Sign in',
    register_btn: 'Create Account',
    toggle_register: "Don't have an account? Sign up",
    toggle_login: 'Already have an account? Sign in',
    auth_footer: 'Protected by enterprise-grade security',

    ai_assistant_menu: 'AI Assistant',
    ai_assistant_title: 'Zimam AI',
    ai_assistant_desc: 'Your intelligent business copilot.',
    chat_welcome: 'Hello! I am Zimam AI. How can I help you control your business today?',
    chat_placeholder: 'Ask about inventory, sales, or accounting...',
    mode_general: 'General AI',
    mode_data: 'Chat with Data',
    mode_data_desc: 'Connects to DB (SQL)',
    chat_error: 'Sorry, I encountered an error.',

    currency_sar: 'SAR',
    unknown: 'Unknown',
    date: 'Date',
    status: 'Status',
    amount: 'Amount',
    name: 'Name',
    phone: 'Phone',
    email: 'Email',
    balance: 'Balance',
    actions: 'Actions',

    fin_overview: 'Financial Overview',
    welcome_msg: "Welcome to Zimam. Here's your command center.",
    refresh_ai: 'Refresh AI Insights',
    analyzing: 'Analyzing...',
    smart_assistant: 'Smart Assistant',
    rev_vs_exp: 'Revenue vs Expenses',
    cash_flow: 'Cash Flow Trend',
    action: 'Action',
    chart_revenue: 'Revenue',
    chart_expenses: 'Expenses',
    market_pulse: 'Market Pulse',
    live_search: 'Powered by Google Search',
    no_news: 'Unable to fetch news.',
    sim_lab: 'Financial Simulator',
    sim_desc: 'What-If Scenarios',
    run_sim: 'Run Simulation',
    sim_placeholder: 'e.g. What if sales drop 20%?',
    sim_result: 'Simulation Result',
    impact_rev: 'Revenue Impact',
    impact_prof: 'Profit Impact',

    inventory_mgmt: 'Inventory Control',
    inventory_desc: 'Track stock and leverage AI with Real-time Market Search.',
    run_ai: 'Run AI Predictor',
    run_ai_live: 'Live Prediction',
    analyzing_web: 'Scanning Market...',
    col_product: 'Product',
    col_stock: 'Stock',
    col_ai: 'AI Suggestion',
    adjust_stock: 'Adjust',
    visual_audit: 'Visual Audit',
    market_check: 'Check Price',
    market_check_res: 'Market Analysis',
    apply_count: 'Apply Count',
    apply_price: 'Apply Price',
    confirm_adjust: 'Confirm',
    cancel: 'Cancel',
    reason_damage: 'Damage',
    reason_theft: 'Theft/Loss',

    wa_automation: 'WhatsApp Automation',
    wa_desc: 'Upload invoice images to auto-draft entries.',
    sim_incoming: '1. Simulate Incoming Media',
    click_upload: 'Click to upload Invoice',
    process_gemini: 'Process with AI',
    extracting: 'Extracting...',
    vendor: 'Vendor',
    total: 'Total',
    create_draft: 'Create Draft',
    waiting: 'Waiting...',

    manage_billing: 'Billing & Compliance (ZATCA/ETA).',
    new_invoice: '+ New Invoice',
    col_id: 'Invoice #',
    col_client: 'Client',
    col_compliance: 'Compliance',
    status_paid: 'PAID',
    status_pending: 'PENDING',
    status_refunded: 'REFUNDED',
    create_invoice_title: 'New Tax Invoice',
    create: 'Create & Sign',
    sim_signing: 'Signing...',
    lbl_uuid: 'UUID',
    lbl_hash: 'Hash',
    refund: 'Refund',

    roadmap_title: 'Product Roadmap',
    roadmap_desc: 'Strategic timeline for Zimam ERP.',
    phase1: 'Phase 1: Foundation',
    phase2: 'Phase 2: Operations',
    phase3: "Phase 3: Genius Features",
    phase4: 'Phase 4: Scaling',

    pos_title: 'Point of Sale',
    search_products: 'Search...',
    current_order: 'Order',
    clear_cart: 'Clear',
    subtotal: 'Subtotal',
    tax_vat: 'VAT (15%)',
    grand_total: 'Total',
    checkout: 'Checkout',
    empty_cart: 'Empty Cart',
    print: 'Print',
    new_sale: 'New Sale',
    receipt_title: 'Tax Invoice',

    settings_title: 'Configuration',
    settings_desc: 'Manage company and compliance.',
    tab_general: 'Profile',
    tab_compliance: 'Compliance',
    tab_data: 'Data Management',
    company_name: 'Company Name',
    currency: 'Currency',
    save_changes: 'Save',
    zatca_integration: 'ZATCA (KSA)',
    zatca_status: 'Connected',
    eta_integration: 'ETA (Egypt)',
    backup_restore: 'Backup & Restore',
    download_backup: 'Download Backup',
    restore_data: 'Restore Data',
    comp_assistant: 'Compliance Assistant',
    comp_desc: 'Ask about regulations.',
    ask_comp_placeholder: 'e.g. ZATCA Phase 2 deadlines...',
    searching_web: 'Searching...',

    purchases_title: 'Purchase Orders',
    purchases_desc: 'Manage supplier orders.',
    new_po: '+ New PO',
    po_id: 'PO #',
    supplier: 'Supplier',
    status_ordered: 'Ordered',
    status_received: 'Received',
    status_received_action: 'Receive',
    negotiate: 'Negotiate',
    negotiation_draft: 'Negotiation Draft',
    copy_email: 'Copy Email',

    add_customer: '+ Customer',
    add_supplier: '+ Supplier',
    receivable: 'Receivable',
    payable: 'Payable',
    
    accounting_title: 'General Ledger',
    accounting_desc: 'Financial records.',
    journal_entries: 'Entries',
    entry_id: 'Entry #',
    account: 'Account',
    debit: 'Debit',
    credit: 'Credit',
    description: 'Description',
    total_debit: 'Total Debit',
    total_credit: 'Total Credit',

    listening: 'Listening...',
    voice_cmd: 'Voice Command',
    online: 'Online',
    offline: 'Offline',
    syncing: 'Syncing Data...',
    synced: 'All Changes Synced',
    pending_sync: 'Pending Sync',
    data_saved: 'Data Saved Locally'
};

export const translations: any = {
  en: en,
  ar: {
    app_name: 'زِمام',
    dashboard: 'القيادة',
    inventory: 'المخزون الذكي',
    pos: 'نقاط البيع',
    invoices: 'الفواتير (زاتكا)',
    purchases: 'المشتريات',
    customers: 'العملاء',
    suppliers: 'الموردين',
    accounting: 'الحسابات',
    whatsapp: 'واتساب OCR',
    roadmap: 'خارطة الطريق',
    settings: 'الإعدادات',
    
    dev_by: 'تطوير',
    dev_name: 'محمد سعيد',
    contact_us: 'تواصل مع المطور',

    login_title: 'تسجيل الدخول لنظام زِمام',
    login_subtitle: 'تحكم في أعمالك بذكاء',
    register_title: 'حساب جديد',
    register_subtitle: 'ابدأ رحلتك مع زِمام',
    full_name: 'الاسم الكامل',
    email_address: 'البريد الإلكتروني',
    password: 'كلمة المرور',
    login_btn: 'دخول',
    register_btn: 'إنشاء حساب',
    toggle_register: 'ليس لديك حساب؟ سجل الآن',
    toggle_login: 'لديك حساب بالفعل؟ دخول',
    auth_footer: 'جميع الحقوق محفوظة - محمد سعيد',

    ai_assistant_menu: 'المساعد الذكي',
    ai_assistant_title: 'زِمام AI',
    ai_assistant_desc: 'مستشارك الذكي للأعمال.',
    chat_welcome: 'أهلاً! أنا زِمام AI. كيف يمكنني مساعدتك في السيطرة على أعمالك اليوم؟',
    chat_placeholder: 'اسأل عن أي شيء...',
    mode_general: 'ذكاء عام',
    mode_data: 'بياناتي (SQL)',
    mode_data_desc: 'متصل بقاعدة البيانات',
    chat_error: 'عذراً، حدث خطأ.',

    currency_sar: 'ر.س',
    unknown: 'غير معروف',
    date: 'التاريخ',
    status: 'الحالة',
    amount: 'المبلغ',
    name: 'الاسم',
    phone: 'الهاتف',
    email: 'البريد',
    balance: 'الرصيد',
    actions: 'إجراءات',

    fin_overview: 'نظرة عامة',
    welcome_msg: 'أهلاً بك في غرفة القيادة.',
    refresh_ai: 'تحديث الذكاء',
    analyzing: 'جاري التحليل...',
    smart_assistant: 'المساعد المالي',
    rev_vs_exp: 'الإيرادات والمصروفات',
    cash_flow: 'التدفق النقدي',
    action: 'إجراء',
    chart_revenue: 'إيراد',
    chart_expenses: 'مصروف',
    market_pulse: 'نبض السوق',
    live_search: 'بحث حي من Google',
    no_news: 'لا توجد أخبار.',
    sim_lab: 'مختبر المحاكاة',
    sim_desc: 'سيناريوهات ماذا لو',
    run_sim: 'تشغيل المحاكاة',
    sim_placeholder: 'مثال: لو الدولار زاد 10%؟',
    sim_result: 'نتيجة المحاكاة',
    impact_rev: 'تأثير الإيراد',
    impact_prof: 'تأثير الربح',

    inventory_mgmt: 'التحكم بالمخزون',
    inventory_desc: 'تتبع ذكي للمخزون مع ربط بالسوق.',
    run_ai: 'تنبؤ ذكي',
    run_ai_live: 'فحص السوق',
    analyzing_web: 'جاري المسح...',
    col_product: 'المنتج',
    col_stock: 'المخزون',
    col_ai: 'اقتراح AI',
    adjust_stock: 'تسوية',
    visual_audit: 'جرد بصري',
    market_check: 'فحص السعر',
    market_check_res: 'تحليل السوق',
    apply_count: 'تحديث المخزون',
    apply_price: 'تحديث السعر',
    confirm_adjust: 'تأكيد',
    cancel: 'إلغاء',
    reason_damage: 'تالف',
    reason_theft: 'عجز/فقد',

    wa_automation: 'أتمتة واتساب',
    wa_desc: 'تحويل صور الفواتير لقيود شراء.',
    sim_incoming: '1. محاكاة وارد',
    click_upload: 'رفع صورة الفاتورة',
    process_gemini: 'معالجة (AI)',
    extracting: 'استخراج...',
    vendor: 'المورد',
    total: 'الإجمالي',
    create_draft: 'مسودة شراء',
    waiting: 'انتظار...',

    manage_billing: 'فوترة معتمدة (زاتكا/مصر).',
    new_invoice: '+ فاتورة',
    col_id: 'رقم',
    col_client: 'العميل',
    col_compliance: 'الامتثال',
    status_paid: 'مدفوع',
    status_pending: 'انتظار',
    status_refunded: 'مرتجع',
    create_invoice_title: 'فاتورة ضريبية',
    create: 'إصدار وتوقيع',
    sim_signing: 'تشفير...',
    lbl_uuid: 'UUID',
    lbl_hash: 'Hash',
    refund: 'استرجاع',

    roadmap_title: 'خارطة الطريق',
    roadmap_desc: 'مستقبل نظام زِمام.',
    phase1: 'م1: التأسيس',
    phase2: 'م2: العمليات',
    phase3: 'م3: الذكاء',
    phase4: 'م4: التوسع',

    pos_title: 'الكاشير (POS)',
    search_products: 'بحث...',
    current_order: 'الطلب',
    clear_cart: 'مسح',
    subtotal: 'فرعي',
    tax_vat: 'ضريبة (15%)',
    grand_total: 'الإجمالي',
    checkout: 'دفع',
    empty_cart: 'فارغة',
    print: 'طباعة',
    new_sale: 'عملية جديدة',
    receipt_title: 'فاتورة ضريبية مبسطة',

    settings_title: 'الإعدادات',
    settings_desc: 'الشركة والربط الحكومي.',
    tab_general: 'الملف',
    tab_compliance: 'الربط',
    tab_data: 'إدارة البيانات',
    company_name: 'المنشأة',
    currency: 'العملة',
    save_changes: 'حفظ',
    zatca_integration: 'زاتكا (السعودية)',
    zatca_status: 'متصل',
    eta_integration: 'الضرائب (مصر)',
    backup_restore: 'نسخ واستعادة',
    download_backup: 'تحميل نسخة',
    restore_data: 'استعادة نسخة',
    comp_assistant: 'مساعد الامتثال',
    comp_desc: 'اسأل عن اللوائح.',
    ask_comp_placeholder: 'مثال: متطلبات المرحلة الثانية...',
    searching_web: 'جاري البحث...',

    purchases_title: 'أوامر الشراء',
    purchases_desc: 'طلبات الموردين.',
    new_po: '+ طلب شراء',
    po_id: 'رقم',
    supplier: 'المورد',
    status_ordered: 'مطلوب',
    status_received: 'مستلم',
    status_received_action: 'استلام',
    negotiate: 'تفاوض آلي',
    negotiation_draft: 'مسودة التفاوض',
    copy_email: 'نسخ النص',

    add_customer: '+ عميل',
    add_supplier: '+ مورد',
    receivable: 'لنا',
    payable: 'علينا',
    
    accounting_title: 'القيود اليومية',
    accounting_desc: 'السجل المالي.',
    journal_entries: 'القيود',
    entry_id: 'قيد #',
    account: 'الحساب',
    debit: 'مدين',
    credit: 'دائن',
    description: 'البيان',
    total_debit: 'مجموع مدين',
    total_credit: 'مجموع دائن',

    listening: 'أستمع إليك...',
    voice_cmd: 'أوامر صوتية',
    online: 'متصل بالإنترنت',
    offline: 'وضع عدم الاتصال',
    syncing: 'جاري المزامنة...',
    synced: 'تمت المزامنة',
    pending_sync: 'في الانتظار',
    data_saved: 'يتم الحفظ محلياً'
  },
  fr: {
    app_name: 'Zimam',
    dashboard: 'Tableau de bord',
    inventory: 'Stock IA',
    pos: 'Point de Vente',
    invoices: 'Factures (ZATCA)',
    purchases: 'Achats',
    customers: 'Clients',
    suppliers: 'Fournisseurs',
    accounting: 'Comptabilité',
    whatsapp: 'OCR WhatsApp',
    roadmap: 'Feuille de route',
    settings: 'Paramètres',
    
    dev_by: 'Développé par',
    dev_name: 'Mohamed Said',
    contact_us: 'Contacter le support',

    login_title: 'Connexion à Zimam',
    login_subtitle: 'Prenez le contrôle de votre entreprise',
    register_title: 'Créer un compte',
    register_subtitle: 'Commencez votre voyage avec Zimam',
    full_name: 'Nom complet',
    email_address: 'Adresse e-mail',
    password: 'Mot de passe',
    login_btn: 'Se connecter',
    register_btn: 'Créer un compte',
    toggle_register: "Pas de compte ? S'inscrire",
    toggle_login: 'Déjà un compte ? Se connecter',
    auth_footer: 'Protégé par une sécurité d\'entreprise',

    ai_assistant_menu: 'Assistant IA',
    ai_assistant_title: 'Zimam IA',
    ai_assistant_desc: 'Votre copilote d\'affaires intelligent.',
    chat_welcome: 'Bonjour ! Je suis Zimam IA. Comment puis-je vous aider aujourd\'hui ?',
    chat_placeholder: 'Demandez sur le stock, les ventes...',
    mode_general: 'IA Générale',
    mode_data: 'Chat Données (SQL)',
    mode_data_desc: 'Connecté à la BD',
    chat_error: 'Désolé, une erreur s\'est produite.',

    currency_sar: 'SAR',
    unknown: 'Inconnu',
    date: 'Date',
    status: 'Statut',
    amount: 'Montant',
    name: 'Nom',
    phone: 'Téléphone',
    email: 'E-mail',
    balance: 'Solde',
    actions: 'Actions',

    fin_overview: 'Aperçu financier',
    welcome_msg: "Bienvenue sur Zimam. Voici votre centre de commande.",
    refresh_ai: 'Actualiser IA',
    analyzing: 'Analyse...',
    smart_assistant: 'Assistant intelligent',
    rev_vs_exp: 'Revenus vs Dépenses',
    cash_flow: 'Flux de trésorerie',
    action: 'Action',
    chart_revenue: 'Revenus',
    chart_expenses: 'Dépenses',
    market_pulse: 'Pouls du marché',
    live_search: 'Propulsé par Google Search',
    no_news: 'Impossible de récupérer les nouvelles.',
    sim_lab: 'Simulateur financier',
    sim_desc: 'Scénarios What-If',
    run_sim: 'Lancer simulation',
    sim_placeholder: 'Ex: Si les ventes chutent de 20% ?',
    sim_result: 'Résultat simulation',
    impact_rev: 'Impact revenus',
    impact_prof: 'Impact profit',

    inventory_mgmt: 'Contrôle des stocks',
    inventory_desc: 'Suivi des stocks avec recherche marché.',
    run_ai: 'Prédicteur IA',
    run_ai_live: 'Prédiction Live',
    analyzing_web: 'Scan du marché...',
    col_product: 'Produit',
    col_stock: 'Stock',
    col_ai: 'Suggestion IA',
    adjust_stock: 'Ajuster',
    visual_audit: 'Audit Visuel',
    market_check: 'Vérifier Prix',
    market_check_res: 'Analyse Marché',
    apply_count: 'Appliquer Qte',
    apply_price: 'Appliquer Prix',
    confirm_adjust: 'Confirmer',
    cancel: 'Annuler',
    reason_damage: 'Dommage',
    reason_theft: 'Vol/Perte',

    wa_automation: 'Automatisation WhatsApp',
    wa_desc: 'Uploader factures pour saisie auto.',
    sim_incoming: '1. Simuler média entrant',
    click_upload: 'Uploader facture',
    process_gemini: 'Traiter avec IA',
    extracting: 'Extraction...',
    vendor: 'Vendeur',
    total: 'Total',
    create_draft: 'Créer brouillon',
    waiting: 'En attente...',

    manage_billing: 'Facturation & Conformité.',
    new_invoice: '+ Nouvelle Facture',
    col_id: 'Facture #',
    col_client: 'Client',
    col_compliance: 'Conformité',
    status_paid: 'PAYÉ',
    status_pending: 'EN ATTENTE',
    status_refunded: 'REMBOURSÉ',
    create_invoice_title: 'Nouvelle facture fiscale',
    create: 'Créer & Signer',
    sim_signing: 'Signature...',
    lbl_uuid: 'UUID',
    lbl_hash: 'Hash',
    refund: 'Rembourser',

    roadmap_title: 'Feuille de route',
    roadmap_desc: 'Chronologie stratégique.',
    phase1: 'Phase 1 : Fondation',
    phase2: 'Phase 2 : Opérations',
    phase3: "Phase 3 : Fonctionnalités Genius",
    phase4: 'Phase 4 : Mise à l\'échelle',

    pos_title: 'Point de Vente (POS)',
    search_products: 'Rechercher...',
    current_order: 'Commande',
    clear_cart: 'Vider',
    subtotal: 'Sous-total',
    tax_vat: 'TVA (15%)',
    grand_total: 'Total',
    checkout: 'Payer',
    empty_cart: 'Panier vide',
    print: 'Imprimer',
    new_sale: 'Nouvelle vente',
    receipt_title: 'Facture Fiscale',

    settings_title: 'Configuration',
    settings_desc: 'Gérer entreprise et conformité.',
    tab_general: 'Profil',
    tab_compliance: 'Conformité',
    tab_data: 'Gestion des données',
    company_name: 'Nom de l\'entreprise',
    currency: 'Devise',
    save_changes: 'Enregistrer',
    zatca_integration: 'ZATCA (KSA)',
    zatca_status: 'Connecté',
    eta_integration: 'ETA (Égypte)',
    backup_restore: 'Sauvegarde & Restauration',
    download_backup: 'Télécharger sauvegarde',
    restore_data: 'Restaurer données',
    comp_assistant: 'Assistant Conformité',
    comp_desc: 'Questions sur les régulations.',
    ask_comp_placeholder: 'Ex: Délais ZATCA Phase 2...',
    searching_web: 'Recherche...',

    purchases_title: 'Commandes d\'achat',
    purchases_desc: 'Gérer les commandes fournisseurs.',
    new_po: '+ Nouveau BC',
    po_id: 'BC #',
    supplier: 'Fournisseur',
    status_ordered: 'Commandé',
    status_received: 'Reçu',
    status_received_action: 'Recevoir',
    negotiate: 'Négocier',
    negotiation_draft: 'Brouillon négociation',
    copy_email: 'Copier E-mail',

    add_customer: '+ Client',
    add_supplier: '+ Fournisseur',
    receivable: 'À recevoir',
    payable: 'À payer',
    
    accounting_title: 'Grand Livre',
    accounting_desc: 'Dossiers financiers.',
    journal_entries: 'Écritures',
    entry_id: 'Entrée #',
    account: 'Compte',
    debit: 'Débit',
    credit: 'Crédit',
    description: 'Description',
    total_debit: 'Total Débit',
    total_credit: 'Total Crédit',

    listening: 'Écoute...',
    voice_cmd: 'Commande Vocale',
    online: 'En ligne',
    offline: 'Hors ligne',
    syncing: 'Synchro...',
    synced: 'Synchronisé',
    pending_sync: 'En attente',
    data_saved: 'Sauvegardé localement'
  },
  it: {
    app_name: 'Zimam',
    dashboard: 'Cruscotto',
    inventory: 'Inventario IA',
    pos: 'Punto Vendita',
    invoices: 'Fatture (ZATCA)',
    purchases: 'Acquisti',
    customers: 'Clienti',
    suppliers: 'Fornitori',
    accounting: 'Contabilità',
    whatsapp: 'WhatsApp OCR',
    roadmap: 'Roadmap',
    settings: 'Impostazioni',
    
    dev_by: 'Sviluppato da',
    dev_name: 'Mohamed Said',
    contact_us: 'Contatta Supporto',

    login_title: 'Accedi a Zimam',
    login_subtitle: 'Prendi il controllo della tua azienda',
    register_title: 'Crea Account',
    register_subtitle: 'Inizia il tuo viaggio con Zimam',
    full_name: 'Nome Completo',
    email_address: 'Indirizzo Email',
    password: 'Password',
    login_btn: 'Accedi',
    register_btn: 'Crea Account',
    toggle_register: "Non hai un account? Iscriviti",
    toggle_login: 'Hai già un account? Accedi',
    auth_footer: 'Protetto da sicurezza aziendale',

    ai_assistant_menu: 'Assistente IA',
    ai_assistant_title: 'Zimam IA',
    ai_assistant_desc: 'Il tuo copilota aziendale intelligente.',
    chat_welcome: 'Ciao! Sono Zimam IA. Come posso aiutarti oggi?',
    chat_placeholder: 'Chiedi su inventario, vendite...',
    mode_general: 'IA Generale',
    mode_data: 'Chat Dati (SQL)',
    mode_data_desc: 'Connesso al DB',
    chat_error: 'Spiacente, si è verificato un errore.',

    currency_sar: 'SAR',
    unknown: 'Sconosciuto',
    date: 'Data',
    status: 'Stato',
    amount: 'Importo',
    name: 'Nome',
    phone: 'Telefono',
    email: 'Email',
    balance: 'Saldo',
    actions: 'Azioni',

    fin_overview: 'Panoramica Finanziaria',
    welcome_msg: "Benvenuto in Zimam. Ecco il tuo centro di comando.",
    refresh_ai: 'Aggiorna Insight IA',
    analyzing: 'Analisi...',
    smart_assistant: 'Assistente Smart',
    rev_vs_exp: 'Ricavi vs Spese',
    cash_flow: 'Flusso di Cassa',
    action: 'Azione',
    chart_revenue: 'Ricavi',
    chart_expenses: 'Spese',
    market_pulse: 'Polso del Mercato',
    live_search: 'Powered by Google Search',
    no_news: 'Impossibile recuperare notizie.',
    sim_lab: 'Simulatore Finanziario',
    sim_desc: 'Scenari What-If',
    run_sim: 'Esegui Simulazione',
    sim_placeholder: 'Es. Se le vendite calano del 20%?',
    sim_result: 'Risultato Simulazione',
    impact_rev: 'Impatto Ricavi',
    impact_prof: 'Impatto Profitti',

    inventory_mgmt: 'Controllo Inventario',
    inventory_desc: 'Traccia lo stock con ricerca di mercato.',
    run_ai: 'Predittore IA',
    run_ai_live: 'Predizione Live',
    analyzing_web: 'Scansione Mercato...',
    col_product: 'Prodotto',
    col_stock: 'Stock',
    col_ai: 'Suggerimento IA',
    adjust_stock: 'Regola',
    visual_audit: 'Audit Visivo',
    market_check: 'Controlla Prezzo',
    market_check_res: 'Analisi Mercato',
    apply_count: 'Applica Qta',
    apply_price: 'Applica Prezzo',
    confirm_adjust: 'Conferma',
    cancel: 'Annulla',
    reason_damage: 'Danno',
    reason_theft: 'Furto/Perdita',

    wa_automation: 'Automazione WhatsApp',
    wa_desc: 'Carica fatture per bozze auto.',
    sim_incoming: '1. Simula media in arrivo',
    click_upload: 'Carica Fattura',
    process_gemini: 'Elabora con IA',
    extracting: 'Estrazione...',
    vendor: 'Venditore',
    total: 'Totale',
    create_draft: 'Crea Bozza',
    waiting: 'In attesa...',

    manage_billing: 'Fatturazione & Conformità.',
    new_invoice: '+ Nuova Fattura',
    col_id: 'Fattura #',
    col_client: 'Cliente',
    col_compliance: 'Conformità',
    status_paid: 'PAGATO',
    status_pending: 'IN ATTESA',
    status_refunded: 'RIMBORSATO',
    create_invoice_title: 'Nuova Fattura Fiscale',
    create: 'Crea & Firma',
    sim_signing: 'Firma...',
    lbl_uuid: 'UUID',
    lbl_hash: 'Hash',
    refund: 'Rimborso',

    roadmap_title: 'Roadmap Prodotto',
    roadmap_desc: 'Cronologia strategica.',
    phase1: 'Fase 1: Fondamenta',
    phase2: 'Fase 2: Operazioni',
    phase3: "Fase 3: Funzioni Genius",
    phase4: 'Fase 4: Scalabilità',

    pos_title: 'Ponto Vendita (POS)',
    search_products: 'Cerca...',
    current_order: 'Ordine',
    clear_cart: 'Svuota',
    subtotal: 'Subtotale',
    tax_vat: 'IVA (15%)',
    grand_total: 'Totale',
    checkout: 'Checkout',
    empty_cart: 'Carrello Vuoto',
    print: 'Stampa',
    new_sale: 'Nuova Vendita',
    receipt_title: 'Fattura Fiscale',

    settings_title: 'Configurazione',
    settings_desc: 'Gestisci azienda e conformità.',
    tab_general: 'Profilo',
    tab_compliance: 'Conformità',
    tab_data: 'Gestione Dati',
    company_name: 'Nome Azienda',
    currency: 'Valuta',
    save_changes: 'Salva',
    zatca_integration: 'ZATCA (KSA)',
    zatca_status: 'Connesso',
    eta_integration: 'ETA (Egitto)',
    backup_restore: 'Backup & Ripristino',
    download_backup: 'Scarica Backup',
    restore_data: 'Ripristina Dati',
    comp_assistant: 'Assistente Conformità',
    comp_desc: 'Chiedi sulle normative.',
    ask_comp_placeholder: 'Es. Scadenze ZATCA Fase 2...',
    searching_web: 'Ricerca...',

    purchases_title: 'Ordini Acquisto',
    purchases_desc: 'Gestisci ordini fornitori.',
    new_po: '+ Nuovo OA',
    po_id: 'OA #',
    supplier: 'Fornitore',
    status_ordered: 'Ordinato',
    status_received: 'Ricevuto',
    status_received_action: 'Ricevi',
    negotiate: 'Negozia',
    negotiation_draft: 'Bozza Negoziazione',
    copy_email: 'Copia Email',

    add_customer: '+ Cliente',
    add_supplier: '+ Fornitore',
    receivable: 'Crediti',
    payable: 'Debiti',
    
    accounting_title: 'Libro Mastro',
    accounting_desc: 'Record finanziari.',
    journal_entries: 'Voci',
    entry_id: 'Voce #',
    account: 'Conto',
    debit: 'Dare',
    credit: 'Avere',
    description: 'Descrizione',
    total_debit: 'Totale Dare',
    total_credit: 'Totale Avere',

    listening: 'Ascolto...',
    voice_cmd: 'Comando Vocale',
    online: 'Online',
    offline: 'Offline',
    syncing: 'Sincronizzazione...',
    synced: 'Sincronizzato',
    pending_sync: 'In attesa',
    data_saved: 'Salvato Localmente'
  },
  pt: {
    app_name: 'Zimam',
    dashboard: 'Painel',
    inventory: 'Estoque IA',
    pos: 'Ponto de Venda',
    invoices: 'Faturas (ZATCA)',
    purchases: 'Compras',
    customers: 'Clientes',
    suppliers: 'Fornecedores',
    accounting: 'Contabilidade',
    whatsapp: 'OCR WhatsApp',
    roadmap: 'Roteiro',
    settings: 'Configurações',
    
    dev_by: 'Desenvolvido por',
    dev_name: 'Mohamed Said',
    contact_us: 'Contatar Suporte',

    login_title: 'Entrar no Zimam',
    login_subtitle: 'Assuma o controle do seu negócio',
    register_title: 'Criar Conta',
    register_subtitle: 'Comece sua jornada com Zimam',
    full_name: 'Nome Completo',
    email_address: 'Endereço de E-mail',
    password: 'Senha',
    login_btn: 'Entrar',
    register_btn: 'Criar Conta',
    toggle_register: "Não tem conta? Cadastre-se",
    toggle_login: 'Já tem conta? Entrar',
    auth_footer: 'Protegido por segurança empresarial',

    ai_assistant_menu: 'Assistente IA',
    ai_assistant_title: 'Zimam IA',
    ai_assistant_desc: 'Seu copiloto de negócios inteligente.',
    chat_welcome: 'Olá! Sou Zimam IA. Como posso ajudar você hoje?',
    chat_placeholder: 'Pergunte sobre estoque, vendas...',
    mode_general: 'IA Geral',
    mode_data: 'Chat Dados (SQL)',
    mode_data_desc: 'Conectado ao BD',
    chat_error: 'Desculpe, ocorreu um erro.',

    currency_sar: 'SAR',
    unknown: 'Desconhecido',
    date: 'Data',
    status: 'Status',
    amount: 'Valor',
    name: 'Nome',
    phone: 'Telefone',
    email: 'E-mail',
    balance: 'Saldo',
    actions: 'Ações',

    fin_overview: 'Visão Financeira',
    welcome_msg: "Bem-vindo ao Zimam. Aqui está seu centro de comando.",
    refresh_ai: 'Atualizar Insights IA',
    analyzing: 'Analisando...',
    smart_assistant: 'Assistente Inteligente',
    rev_vs_exp: 'Receitas vs Despesas',
    cash_flow: 'Fluxo de Caixa',
    action: 'Ação',
    chart_revenue: 'Receita',
    chart_expenses: 'Despesas',
    market_pulse: 'Pulso do Mercado',
    live_search: 'Powered by Google Search',
    no_news: 'Não foi possível buscar notícias.',
    sim_lab: 'Simulador Financeiro',
    sim_desc: 'Cenários What-If',
    run_sim: 'Rodar Simulação',
    sim_placeholder: 'Ex. Se vendas caírem 20%?',
    sim_result: 'Resultado Simulação',
    impact_rev: 'Impacto Receita',
    impact_prof: 'Impacto Lucro',

    inventory_mgmt: 'Controle de Estoque',
    inventory_desc: 'Rastreie estoque com pesquisa de mercado.',
    run_ai: 'Preditor IA',
    run_ai_live: 'Previsão Ao Vivo',
    analyzing_web: 'Escaneando Mercado...',
    col_product: 'Produto',
    col_stock: 'Estoque',
    col_ai: 'Sugestão IA',
    adjust_stock: 'Ajustar',
    visual_audit: 'Auditoria Visual',
    market_check: 'Verificar Preço',
    market_check_res: 'Análise de Mercado',
    apply_count: 'Aplicar Qtd',
    apply_price: 'Aplicar Preço',
    confirm_adjust: 'Confirmar',
    cancel: 'Cancelar',
    reason_damage: 'Dano',
    reason_theft: 'Roubo/Perda',

    wa_automation: 'Automação WhatsApp',
    wa_desc: 'Upload de faturas para rascunho auto.',
    sim_incoming: '1. Simular Mídia Entrando',
    click_upload: 'Upload Fatura',
    process_gemini: 'Processar com IA',
    extracting: 'Extraindo...',
    vendor: 'Vendedor',
    total: 'Total',
    create_draft: 'Criar Rascunho',
    waiting: 'Aguardando...',

    manage_billing: 'Faturamento & Conformidade.',
    new_invoice: '+ Nova Fatura',
    col_id: 'Fatura #',
    col_client: 'Cliente',
    col_compliance: 'Conformidade',
    status_paid: 'PAGO',
    status_pending: 'PENDENTE',
    status_refunded: 'REEMBOLSADO',
    create_invoice_title: 'Nova Nota Fiscal',
    create: 'Criar & Assinar',
    sim_signing: 'Assinando...',
    lbl_uuid: 'UUID',
    lbl_hash: 'Hash',
    refund: 'Reembolsar',

    roadmap_title: 'Roteiro do Produto',
    roadmap_desc: 'Cronograma estratégico.',
    phase1: 'Fase 1: Fundação',
    phase2: 'Fase 2: Operações',
    phase3: "Fase 3: Recursos Genius",
    phase4: 'Fase 4: Escala',

    pos_title: 'Ponto de Venda (POS)',
    search_products: 'Buscar...',
    current_order: 'Pedido',
    clear_cart: 'Limpar',
    subtotal: 'Subtotal',
    tax_vat: 'IVA (15%)',
    grand_total: 'Total',
    checkout: 'Pagar',
    empty_cart: 'Carrinho Vazio',
    print: 'Imprimir',
    new_sale: 'Nova Venda',
    receipt_title: 'Nota Fiscal',

    settings_title: 'Configuração',
    settings_desc: 'Gerenciar empresa e conformidade.',
    tab_general: 'Perfil',
    tab_compliance: 'Conformidade',
    tab_data: 'Gerenciamento de Dados',
    company_name: 'Nome da Empresa',
    currency: 'Moeda',
    save_changes: 'Salvar',
    zatca_integration: 'ZATCA (KSA)',
    zatca_status: 'Conectado',
    eta_integration: 'ETA (Egito)',
    backup_restore: 'Backup & Restauração',
    download_backup: 'Baixar Backup',
    restore_data: 'Restaurar Dados',
    comp_assistant: 'Assistente Conformidade',
    comp_desc: 'Pergunte sobre regulamentos.',
    ask_comp_placeholder: 'Ex. Prazos ZATCA Fase 2...',
    searching_web: 'Buscando...',

    purchases_title: 'Pedidos de Compra',
    purchases_desc: 'Gerenciar pedidos fornecedores.',
    new_po: '+ Novo PC',
    po_id: 'PC #',
    supplier: 'Fornecedor',
    status_ordered: 'Pedido',
    status_received: 'Recebido',
    status_received_action: 'Receber',
    negotiate: 'Negociar',
    negotiation_draft: 'Rascunho Negociação',
    copy_email: 'Copiar E-mail',

    add_customer: '+ Cliente',
    add_supplier: '+ Fornecedor',
    receivable: 'A Receber',
    payable: 'A Pagar',
    
    accounting_title: 'Livro Razão',
    accounting_desc: 'Registros financeiros.',
    journal_entries: 'Lançamentos',
    entry_id: 'Lançamento #',
    account: 'Conta',
    debit: 'Débito',
    credit: 'Crédito',
    description: 'Descrição',
    total_debit: 'Total Débito',
    total_credit: 'Total Crédito',

    listening: 'Ouvindo...',
    voice_cmd: 'Comando de Voz',
    online: 'Online',
    offline: 'Offline',
    syncing: 'Sincronizando...',
    synced: 'Sincronizado',
    pending_sync: 'Pendente',
    data_saved: 'Salvo Localmente'
  },
  de: en,
  hi: en,
  ur: en,
  tl: en,
};

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export const LanguageProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [language, setLanguage] = useState<Language>('en');

  const t = (key: string) => {
    return translations[language]?.[key] || translations['en'][key] || key;
  };

  const dir = (language === 'ar' || language === 'ur') ? 'rtl' : 'ltr';

  useEffect(() => {
    document.documentElement.dir = dir;
    document.documentElement.lang = language;
  }, [dir, language]);

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t, dir }}>
      {children}
    </LanguageContext.Provider>
  );
};

export const useLanguage = () => {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
};